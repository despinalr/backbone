$(document).on("ready",function(){$("#conectar").click(function(){alert("hola mundo")}),utils.loadTemplate(["HomeView","PersonaListItemView","PersonaView"],function(){app=new AppRouter,Backbone.history.start()})}),window.Persona=Backbone.Model.extend({urlRoot:"personas",idAttribute:"_id",initialize:function(){this.validators={}},validateItem:function(){return{isValid:!0}},validateAll:function(){return{isValid:!0}},save:function(a,b){b||(b={}),delete this.attributes._id,Backbone.Model.prototype.save.call(this,a,b)},defaults:{_id:null,Cedula:0,Nombre:"",Apellido:""}}),window.PersonaCollection=Backbone.Collection.extend({model:Persona,url:"personas"}),window.AppRouter=Backbone.Router.extend({routes:{"":"home",products:"list",addproduct:"add","editproduct/:id":"edit"},initialize:function(){},home:function(){this.home_view=new HomeView,$("#content").html(this.home_view.el)},list:function(){var a=new PersonaCollection;a.fetch({success:function(){$("#personaslst").html(new PersonaListView({model:a}).el)},error:function(a,b){console.log(b)}}).complete(function(){console.log("done")})},add:function(){var a=new Persona;$("#content").html(new PersonaView({model:a}).el)},edit:function(a){var b=new Persona({_id:a});b.fetch({success:function(){$("#content").html(new PersonaView({model:b}).el)}})}}),window.utils={loadTemplate:function(a,b){var c=[];$.each(a,function(a,b){window[b]?c.push($.get(b+".html",function(a){window[b].prototype.template=_.template(a)})):alert(b+" not found")}),$.when.apply(null,c).done(b)}},window.HomeView=Backbone.View.extend({initialize:function(){this.render()},render:function(){return $(this.el).html(this.template()),this}}),window.PersonaListView=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this.model.models,b=$(this.el);return $.each(a,function(a,c){b.append(new PersonaListItemView({model:c}).render().el)}),this}}),window.PersonaListItemView=Backbone.View.extend({initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.close,this)},render:function(){return $(this.el).html(this.template(this.model.toJSON())),this}}),window.PersonaView=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this.model,b=$(this.el);return b.html(this.template(a.toJSON())),this},events:{change:"change","click .save":"save","click .cancel":"canceladd","click .delete":"delete"},change:function(a){var b=a.target,c={};c[b.name]=b.value,this.model.set(c)},save:function(){this.model.save(null,{success:function(){app.navigate("products",!0),console.log("Success! Product saved successfully")},error:function(){console.log("Error An error occurred while trying to save this item")}})},canceladd:function(){window.history.back()},"delete":function(){return this.model.destroy({success:function(){app.navigate("products",!0),console.log("Product deleted successfully")}}),!1}});